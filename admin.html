<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Card치pio Digital</title>
<style>
  body {
    font-family: 'Poppins', sans-serif;
    background: #f4f6f9;
    margin: 2rem;
  }
  h1 {
    color: #6a1b9a;
    text-align: center;
  }
  .cardapio-item {
    background: white;
    border-radius: 12px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    margin-bottom: 1.5rem;
    padding: 1rem;
    display: flex;
    gap: 1rem;
    align-items: center;
  }
  .cardapio-item img {
    width: 120px;
    height: 90px;
    object-fit: cover;
    border-radius: 8px;
  }
  .item-info {
    flex: 1;
  }
  .item-info h2 {
    margin: 0 0 0.5rem 0;
    color: #6a1b9a;
  }
  .item-info p {
    margin: 0;
    color: #555;
  }
  .preco {
    font-weight: bold;
    margin-top: 5px;
    color: #000;
  }
  .btn {
    padding: 0.6rem 1rem;
    border-radius: 8px;
    cursor: pointer;
    border: none;
    margin-top: 5px;
  }
  .btn-comprar { background: #43a047; color: white; }
  .btn-excluir { background: #e53935; color: white; margin-left: 5px; }
  .btn-editar { background: #1e88e5; color: white; margin-left: 5px; }
  .formulario {
    display: none;
    background: white;
    border-radius: 12px;
    padding: 1rem;
    box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    margin-bottom: 2rem;
  }
  .formulario input, .formulario textarea, .formulario select {
    width: 100%;
    padding: 0.6rem;
    margin-bottom: 1rem;
    border: 1px solid #ccc;
    border-radius: 6px;
  }
  .formulario button {
    background: #6a1b9a;
    color: white;
    border: none;
    padding: 0.8rem 1.5rem;
    border-radius: 8px;
    cursor: pointer;
  }
  .login-box {
    text-align: center;
    margin-bottom: 1.5rem;
  }
  .login-box input { padding: 0.5rem; margin-right: 0.5rem; }
  .filtros { text-align: center; margin-bottom: 1rem; }
  .filtros button {
    padding: 8px 15px;
    border: 1px solid #6a1b9a;
    background: #fff;
    border-radius: 8px;
    margin: 5px;
    cursor: pointer;
  }
  .filtros button.active {
    background: #6a1b9a;
    color: #fff;
  }
  @media (max-width: 480px) {
    .cardapio-item {
      flex-direction: column;
      align-items: flex-start;
    }
    .cardapio-item img {
      width: 100%;
      height: auto;
    }
  }
</style>
</head>
<body>
<h1>游꼢 Card치pio Digital</h1>

<!-- Login do admin -->
<div class="login-box" id="loginBox">
  <input type="password" id="senhaAdmin" placeholder="Senha admin" />
  <button onclick="loginAdmin()">Entrar</button>
</div>

<!-- Bot칚o logout admin -->
<div class="login-box" id="logoutBox" style="display:none;">
  <button onclick="logoutAdmin()">Sair do modo administrador</button>
</div>

<!-- Formul치rio de Cadastro (s칩 admin v칡) -->
<div class="formulario" id="formulario">
  <h2 id="formTitulo">Adicionar Item</h2>
  <input type="text" id="nome" placeholder="Nome do item" required />
  <input type="number" id="preco" placeholder="Pre칞o" step="0.01" required />
  <textarea id="descricao" placeholder="Descri칞칚o" required></textarea>
  <input type="text" id="imagem" placeholder="URL da imagem" required />
  <input type="text" id="novaCategoria" placeholder="Nova categoria (opcional)" />
  <select id="categoria">
    <option value="Cervejas">Cervejas</option>
    <option value="Bebidas">Bebidas</option>
    <option value="Lanches">Lanches</option>
    <option value="Outros">Outros</option>
  </select>
  <button onclick="salvarItem()">Salvar</button>
</div>

<!-- Filtros -->
<div class="filtros" id="filtros"></div>

<!-- Lista de Itens -->
<div id="listaCardapio"></div>

<script>
let cardapio = JSON.parse(localStorage.getItem('cardapio')) || [];
let adminLogado = false;
let editIndex = null;
let categoriaAtiva = "Todos";

const lista = document.getElementById('listaCardapio');
const form = document.getElementById('formulario');
const loginBox = document.getElementById('loginBox');
const logoutBox = document.getElementById('logoutBox');

function salvarCardapio() {
  localStorage.setItem('cardapio', JSON.stringify(cardapio));
}

function renderizar() {
  lista.innerHTML = '';
  let itens = categoriaAtiva === "Todos" ? cardapio : cardapio.filter(i => i.categoria === categoriaAtiva);

  if (itens.length === 0) {
    lista.innerHTML = '<p>Nenhum item nesta categoria.</p>';
  } else {
    itens.forEach((item, index) => {
      const div = document.createElement('div');
      div.className = 'cardapio-item';
      div.innerHTML = `
        <img src="${item.imagem}" alt="${item.nome}" onerror="this.src='https://via.placeholder.com/120x90?text=Sem+Imagem'" />
        <div class="item-info">
          <h2>${item.nome}</h2>
          <p>${item.descricao}</p>
          <p class="preco">R$ ${item.preco.toFixed(2)}</p>
          <p><em>${item.categoria}</em></p>
          <button class="btn btn-comprar" onclick="comprar('${item.nome}')">Comprar</button>
          ${adminLogado ? `
            <button class="btn btn-editar" onclick="editarItem(${index})">Editar</button>
            <button class="btn btn-excluir" onclick="excluirItem(${index})">Excluir</button>
          ` : ''}
        </div>
      `;
      lista.appendChild(div);
    });
  }
}

function comprar(nome) {
  const numero = "55999999999"; // troque pelo WhatsApp real
  window.open(`https://wa.me/${numero}?text=${encodeURIComponent('Ol치, gostaria de pedir: ' + nome)}`, "_blank");
}

function loginAdmin() {
  const senha = document.getElementById('senhaAdmin').value;
  if (senha === "12345") {
    adminLogado = true;
    form.style.display = 'block';
    loginBox.style.display = 'none';
    logoutBox.style.display = 'block';
    document.getElementById('senhaAdmin').value = '';
    atualizarFiltros();
    renderizar();
  } else {
    alert("Senha incorreta!");
  }
}

function logoutAdmin() {
  adminLogado = false;
  form.style.display = 'none';
  loginBox.style.display = 'block';
  logoutBox.style.display = 'none';
  renderizar();
}

function salvarItem() {
  const nome = document.getElementById('nome').value;
  const preco = parseFloat(document.getElementById('preco').value);
  const descricao = document.getElementById('descricao').value;
  const imagem = document.getElementById('imagem').value;
  const categoriaSelect = document.getElementById('categoria');
  const novaCategoria = document.getElementById('novaCategoria').value.trim();

  const categoria = novaCategoria || categoriaSelect.value;

  if (!nome || isNaN(preco) || !descricao || !imagem || !categoria) {
    alert('Preencha todos os campos!');
    return;
  }

  // Adiciona nova categoria se n칚o existir
  if (novaCategoria && ![...categoriaSelect.options].some(o => o.value === novaCategoria)) {
    const option = document.createElement('option');
    option.value = novaCategoria;
    option.text = novaCategoria;
    categoriaSelect.add(option);
    atualizarFiltros();
  }

  if (editIndex !== null) {
    cardapio[editIndex] = { nome, preco, descricao, imagem, categoria };
    editIndex = null;
    document.getElementById('formTitulo').innerText = "Adicionar Item";
  } else {
    cardapio.push({ nome, preco, descricao, imagem, categoria });
  }

  salvarCardapio();
  renderizar();

  document.getElementById('nome').value = '';
  document.getElementById('preco').value = '';
  document.getElementById('descricao').value = '';
  document.getElementById('imagem').value = '';
  document.getElementById('novaCategoria').value = '';
}

function editarItem(index) {
  const item = cardapio[index];
  document.getElementById('nome').value = item.nome;
  document.getElementById('preco').value = item.preco;
  document.getElementById('descricao').value = item.descricao;
  document.getElementById('imagem').value = item.imagem;
  document.getElementById('categoria').value = item.categoria;

  editIndex = index;
  document.getElementById('formTitulo').innerText = "Editar Item";
  form.scrollIntoView({ behavior: "smooth" });
}

function excluirItem(index) {
  if (confirm('Tem certeza que deseja excluir este item?')) {
    cardapio.splice(index, 1);
    salvarCardapio();
    atualizarFiltros();
    renderizar();
  }
}

function filtrar(cat) {
  categoriaAtiva = cat;
  document.querySelectorAll('.filtros button').forEach(btn => btn.classList.remove('active'));
  [...document.querySelectorAll('.filtros button')]
    .find(b => b.textContent === cat || (cat==="Todos" && b.textContent==="Todos"))
    .classList.add('active');
  renderizar();
}

function atualizarFiltros() {
  const filtrosDiv = document.getElementById('filtros');
  filtrosDiv.innerHTML = '<button class="active" onclick="filtrar(\'Todos\')">Todos</button>';

  const categorias = [...new Set(cardapio.map(item => item.categoria))];
  categorias.forEach(cat => {
    filtrosDiv.innerHTML += `<button onclick="filtrar('${cat}')">${cat}</button>`;
  });

  filtrar(categoriaAtiva);
}

// Inicializa칞칚o
atualizarFiltros();
renderizar();

// Permite enviar senha com Enter
document.getElementById('senhaAdmin').addEventListener('keyup', function(e) {
  if (e.key === 'Enter') loginAdmin();
});
</script>
</body>
</html>
